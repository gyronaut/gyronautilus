<html>
<head>
	<title> g y r o n a u t i l u s </title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript">
	
	var area_name;
	var is_deer_blank = false;
	
	var bg_image = new Image(); 
	var blank_deer = new Image();
	
	
	
	$('document').ready(function(){		
		var context = $('#test_canvas')[0].getContext('2d');
		
		initImages();
		
		bg_image.onload = function(){
			context.drawImage(bg_image, 0, 15);
		};
		
		$('#test_canvas').on('mousemove', function(event){
		var x = event.pageX - $('#test_canvas').offset().left;
		var y = event.pageY - $('#test_canvas').offset().top;
		
		$('#output').html('( '+ x + ', ' + y + ' )');
		
		getAreaName(x, y);
		
		});
		
		$('#test_canvas').on('click', function(event){
			var x = event.pageX - $('#test_canvas').offset().left;
			var y = event.pageY - $('#test_canvas').offset().top;
			changeCanvas(x, y);
		});
			
	});
	
	function initImages(){	
		bg_image.src = "doe-med.jpg";
		bg_image.id = "background_image";
		blank_deer.src = "doe-blank.png";
	}
	
	function getAreaName(x, y)
	{
		if(y < 240){
			area_name = "sky";
		}else{
			area_name = "ground";
		}
		$('#output').append('<h5>'+ area_name +'</h5>');
	}
	
	function changeCanvas(x, y)
	{
		var ctx = $('#test_canvas')[0].getContext('2d');
		if(is_deer_blank){
			ctx.drawImage(bg_image, 0, 15);
			is_deer_blank = false;
		}else{
			if(area_name == "ground"){
				ctx.drawImage(blank_deer, 0, 15);
				is_deer_blank = true;
			}
		}
	}
	</script>
</head>
<body>
	<div id="outer_container">
		<div id="title"> Title </div>
		<div  id="inner_container">
			<div id="sidebar"> Aside </div>
			<div id="content">
				<canvas id="test_canvas" width="700px" height="600px"></canvas>
				<div id="output"></div>
			</div>
		</div>
	</div>
</body>
</html>