<html>
<head>
	<title> g y r o n a u t i l u s </title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript">
	
	var area_name;
	var is_deer_blank = false;
	var is_sky_blank = false;
	
	var bg_image = new Image(); 
	var blank_sky = new Image();
	
	var bird_animation_array = new Array();
	bird_animation_array[0] = new Image();
	bird_animation_array[1] = new Image();
	bird_animation_array[2] = new Image();
	bird_animation_array[3] = new Image();
	bird_animation_array[4] = new Image();
	
	var bird_emerge_frame_1 = new Image();
	var bird_emerge_frame_2 = new Image();
	
	var blank_deer = new Image();
	var blank_deer_animation_array = new Array();
	blank_deer_animation_array[0] = new Image();
	blank_deer_animation_array[1] = new Image();
	blank_deer_animation_array[2] = new Image();
	blank_deer_animation_array[3] = new Image();
	blank_deer_animation_array[4] = new Image();
	blank_deer_animation_array[5] = new Image();
	blank_deer_animation_array[6] = new Image();
	
	blank_deer_frame_pos_array = new Array();
	blank_deer_frame_pos_array[0] = {top: 79, left: 57};
	blank_deer_frame_pos_array[1] = {top: 107, left: 95};
	blank_deer_frame_pos_array[2] = {top: 174, left: 102};
	blank_deer_frame_pos_array[3] = {top: 239, left: 116};
	blank_deer_frame_pos_array[4] = {top: 239, left: 194};
	blank_deer_frame_pos_array[5] = {top: 239, left: 262};
	blank_deer_frame_pos_array[6] = {top: 253, left: 301};
	
	$('document').ready(function(){		
		var context = $('#test_canvas')[0].getContext('2d');
		
		initImages();
		
		bg_image.onload = function(){
			context.drawImage(bg_image, 0, 15);
		};
		
		$('#test_canvas').on('mousemove', function(event){
		var x = event.pageX - $('#test_canvas').offset().left;
		var y = event.pageY - $('#test_canvas').offset().top;
		
		$('#output').html('( '+ x + ', ' + y + ' )');
		
		getAreaName(x, y);
		
		});
		
		$('#test_canvas').on('click', function(event){
			var x = event.pageX - $('#test_canvas').offset().left;
			var y = event.pageY - $('#test_canvas').offset().top;
			changeCanvas(x, y);
		});
			
	});
	
	function initImages(){	
		bg_image.src = "doe-med.jpg";
		blank_deer.src = "doe-blank.png";
		blank_sky.src = "blank-sky.png";
		/*
		bird_animation_array[0].src = "";
		bird_animation_array[1].src = "";
		bird_animation_array[2].src = "";
		bird_animation_array[3].src = "";
		bird_animation_array[4].src = "";
		bird_emerge_frame_1.src = "";
		bird_emerge_frame_2.src = "";
		*/
		blank_deer_animation_array[0].src = "blank-doe-animation/blank-doe-frame-1.png";
		blank_deer_animation_array[1].src = "blank-doe-animation/blank-doe-frame-2.png";
		blank_deer_animation_array[2].src = "blank-doe-animation/blank-doe-frame-3.png";
		blank_deer_animation_array[3].src = "blank-doe-animation/blank-doe-frame-4.png";
		blank_deer_animation_array[4].src = "blank-doe-animation/blank-doe-frame-5.png";
		blank_deer_animation_array[5].src = "blank-doe-animation/blank-doe-frame-6.png";
		blank_deer_animation_array[6].src = "blank-doe-animation/blank-doe-frame-7.png";
	}
	
	function getAreaName(x, y)
	{
		if(y < 240){
			area_name = "sky";
		}else{
			area_name = "ground";
		}
		$('#output').append('<h5>'+ area_name +'</h5>');
	}
	
	function doBirdAnimation()
	{
		//draw emerge frame 1
		//wait
		//draw blank_deer
		//draw emerge frame 2
		//wait
		/*
		draw blank_deer
		for some number of frames{
			draw next bird frame at (x,y) (starting with 3)
			increase (x,y)
			wait
			if bird is covering ground/sky (check x,y){
				draw bg_image
				if (is_sky_blank){
					draw blank_sky
				}
			}
			draw blank_deer
		}
		
		*/
	}
	
	function doBlankDeerAnimation(frame_num){
		var ctx = $('#test_canvas')[0].getContext('2d');
		if(frame_num < 7){
			setTimeout(function(){
				doBlankDeerAnimation(frame_num+1);
			}, 100);
			ctx.drawImage(blank_deer, 0, 15);
			ctx.drawImage(blank_deer_animation_array[frame_num], blank_deer_frame_pos_array[frame_num].left, blank_deer_frame_pos_array[frame_num].top + 15);
		}else{
			ctx.drawImage(blank_deer, 0, 15);
		}
	}
	
	function changeCanvas(x, y)
	{
		var ctx = $('#test_canvas')[0].getContext('2d');
		if(area_name == 'ground'){
			if(is_deer_blank){
				ctx.drawImage(bg_image, 0, 15);
				is_deer_blank = false;
				if(is_sky_blank){
					ctx.drawImage(blank_sky, 0, 15);
				}
			}else{
				doBlankDeerAnimation(0);	
			//	ctx.drawImage(blank_deer, 0, 15);
			//	doBirdAnimation();
				is_deer_blank = true;
			}
		}else if(area_name == 'sky'){
			if(is_sky_blank){
			 	ctx.drawImage(bg_image, 0, 15);
				is_sky_blank = false;
				if(is_deer_blank){
					ctx.drawImage(blank_deer, 0, 15);
				}
			}else{
				ctx.drawImage(blank_sky, 0, 15);
				is_sky_blank = true;
			}
		}
	}
	
	</script>
</head>
<body>
	<div id="outer_container">
		<div id="title"> Title </div>
		<div  id="inner_container">
			<div id="sidebar"> Aside </div>
			<div id="content">
				<canvas id="test_canvas" width="700px" height="600px"></canvas>
				<div id="output"></div>
			</div>
		</div>
	</div>
</body>
</html>